{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$comment": "Copy this file to your project root as .claude-codex.json",

  "codex_stages": {
    "requirements":  { "model": "gpt-5.3-codex", "reasoning": "medium" },
    "design":        { "model": "gpt-5.3-codex", "reasoning": "high" },
    "detect":        { "model": "gpt-5.3-codex", "reasoning": "high" },
    "exploit":       { "model": "gpt-5.3-codex", "reasoning": "xhigh" },
    "patch_verify":  { "model": "gpt-5.3-codex", "reasoning": "high" },
    "review":        { "model": "gpt-5.3-codex", "reasoning": "high" },
    "final_gate":    { "model": "gpt-5.3-codex", "reasoning": "high" }
  },

  "claude_models": {
    "fast": "sonnet",
    "deep": "opus"
  },

  "stage_allocation": {
    "$comment": "Maps pipeline stages to preferred models based on EVMbench data",
    "requirements":    { "model": "opus",   "reason": "No evidence Codex outperforms on requirements" },
    "design":          { "model": "codex",  "reason": "Configurable - either works" },
    "detect_opus":     { "model": "opus",   "reason": "Opus: 45.6% detect (best single model)" },
    "detect_codex":    { "model": "codex",  "reason": "Parallel detect - different models find different bugs" },
    "implementation":  { "model": "sonnet", "reason": "Balanced speed/quality for implementation" },
    "patch_verify":    { "model": "codex",  "reason": "Codex: 41.5% patch (best model)" },
    "exploit_verify":  { "model": "codex",  "reason": "Codex: 72.2% exploit (best model)" },
    "code_review":     { "model": "sonnet", "reason": "Quick code quality check" },
    "deep_review":     { "model": "opus",   "reason": "Deep architectural analysis" },
    "final_gate":      { "model": "codex",  "reason": "Independent final gate (keep)" }
  },

  "exploit_verification": {
    "enable": true,
    "anvil_fork": false,
    "max_exploit_attempts_per_finding": 3,
    "require_poc_test": true,
    "live_chain": {
      "enable": false,
      "anvil_port": 8545,
      "gatekeeper_port": 8546,
      "rpc_gatekeeper": true,
      "seed_eth": "100",
      "timeout_ms": 300000
    }
  },

  "coverage": {
    "min_entrypoint_coverage": 90,
    "min_module_coverage": 100
  },

  "_smart_contract_secure_docs": {
    "enable_invariants": "Run invariant tests in Gate 3 (boolean)",
    "enable_slither": "Run Slither static analysis in Gate 4 (boolean). Flags: --exclude-optimization --exclude-low --exclude-medium --exclude-informational --exclude-dependencies --filter-paths 'dependencies/|script/|test/foundry/' --checklist",
    "enable_semgrep": "Run Semgrep static analysis in Gate 4 (boolean)",
    "fuzz_runs": "Number of fuzz runs for Foundry tests (100-100000)",
    "gate_strictness": "Gate enforcement: high = block, medium = warn, low = ignore",
    "required_coverage": "Minimum test coverage percentage (0-100)",
    "max_iterations": "Max fix iterations per gate before escalating (1-50)",
    "foundry_profile": "Foundry profile to use for tests",
    "slither_args": "Additional arguments for Slither CLI",
    "semgrep_config": "Semgrep config: p/solidity, auto, or custom path"
  },
  "smart_contract_secure": {
    "enable_invariants": true,
    "enable_slither": true,
    "enable_semgrep": false,
    "fuzz_runs": 5000,
    "gate_strictness": "high",
    "required_coverage": 80,
    "max_iterations": 10,
    "foundry_profile": "default",
    "slither_args": "",
    "semgrep_config": "p/solidity"
  }
}
